/* empty css                                                        */import{B as Pt}from"./BlockTitle-Bo3Clcoc.js";import"./MarkdownCode.svelte_svelte_type_style_lang-CndpmQbB.js";import{C as Rt}from"./Check-CEkiXcyC.js";import{C as jt}from"./Copy-CxQ9EyK2.js";import{P as qt}from"./Plus-BuAWg7aq.js";import{S as Jt}from"./Send-DyoOovnk.js";import{T as Ht}from"./Trash-RbZEwH-j.js";import"./index-CE5Dq9Ft.js";import{f as pe}from"./index-BjaWoMJF.js";import{D as et,c as zt}from"./Dropdown-BvbpNOTS.js";import"./StreamingBar.svelte_svelte_type_style_lang-DyfAPhwM.js";/* empty css                                              */import{B as Ut}from"./Block-CJdXVpa7.js";import{S as Ft}from"./index-BS0vHs21.js";import{default as fs}from"./Example-BrizabXh.js";import"./Info-liNK1-j3.js";import"./MarkdownCode-ClpO4-JW.js";import"./prism-python-CfAyo7Kj.js";import"./svelte/svelte.js";import"./DropdownArrow-DYWFcSFn.js";import"./IconButton-C_HS7fTi.js";import"./Clear-By3xiIwg.js";const{SvelteComponent:Gt,append:Se,attr:ge,detach:Kt,element:De,flush:Oe,init:Qt,insert:Vt,listen:Wt,noop:Re,safe_not_equal:Xt,set_data:Yt,set_style:Zt,space:xt,text:$t}=window.__gradio__svelte__internal;function en(n){let e,t,l,o,s,r,u;return{c(){e=De("div"),t=De("button"),l=xt(),o=De("span"),s=$t(n[1]),ge(t,"role","switch"),ge(t,"aria-checked",n[0]),t.disabled=n[2],ge(t,"class","svelte-1wr5wa"),ge(e,"class","s s--slider svelte-1wr5wa"),Zt(e,"font-size","var(--font-size-sm)px")},m(a,_){Vt(a,e,_),Se(e,t),Se(e,l),Se(e,o),Se(o,s),r||(u=Wt(t,"click",n[3]),r=!0)},p(a,[_]){_&1&&ge(t,"aria-checked",a[0]),_&4&&(t.disabled=a[2]),_&2&&Yt(s,a[1])},i:Re,o:Re,d(a){a&&Kt(e),r=!1,u()}}}function tn(n,e,t){let{label:l}=e,{checked:o=!1}=e,{disabled:s=!1}=e;function r(u){const _=u.target.getAttribute("aria-checked");t(0,o=_!=="true")}return n.$$set=u=>{"label"in u&&t(1,l=u.label),"checked"in u&&t(0,o=u.checked),"disabled"in u&&t(2,s=u.disabled)},[o,l,s,r]}class nn extends Gt{constructor(e){super(),Qt(this,e,tn,en,Xt,{label:1,checked:0,disabled:2})}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),Oe()}get checked(){return this.$$.ctx[0]}set checked(e){this.$$set({checked:e}),Oe()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),Oe()}}const{SvelteComponent:sn,add_flush_callback:tt,add_render_callback:Be,append:j,attr:k,bind:nt,binding_callbacks:me,check_outros:$,create_bidirectional_transition:ve,create_component:te,create_in_transition:ln,destroy_component:ne,destroy_each:on,detach:X,element:A,empty:rn,ensure_array_like:je,flush:G,group_outros:ee,init:un,insert:Y,listen:z,mount_component:se,noop:ye,run_all:st,safe_not_equal:an,set_data:fn,set_input_value:he,set_style:qe,space:x,text:cn,toggle_class:ae,transition_in:C,transition_out:I}=window.__gradio__svelte__internal,{createEventDispatcher:_n,tick:ce}=window.__gradio__svelte__internal;function Je(n,e,t){const l=n.slice();return l[73]=e[t],l[74]=e,l[75]=t,l}function He(n){let e,t,l,o;const s=[dn,hn],r=[];function u(a,_){return a[22]?0:1}return e=u(n),t=r[e]=s[e](n),{c(){t.c(),l=rn()},m(a,_){r[e].m(a,_),Y(a,l,_),o=!0},p(a,_){let d=e;e=u(a),e===d?r[e].p(a,_):(ee(),I(r[d],1,1,()=>{r[d]=null}),$(),t=r[e],t?t.p(a,_):(t=r[e]=s[e](a),t.c()),C(t,1),t.m(l.parentNode,l))},i(a){o||(C(t),o=!0)},o(a){I(t),o=!1},d(a){a&&X(l),r[e].d(a)}}}function hn(n){let e,t,l,o,s;return t=new jt({}),{c(){e=A("button"),te(t.$$.fragment),k(e,"class","copy-button svelte-1fonppu"),k(e,"aria-label","Copy"),k(e,"aria-roledescription","Copy text")},m(r,u){Y(r,e,u),se(t,e,null),l=!0,o||(s=z(e,"click",n[34]),o=!0)},p:ye,i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){I(t.$$.fragment,r),l=!1},d(r){r&&X(e),ne(t),o=!1,s()}}}function dn(n){let e,t,l,o;return t=new Rt({}),{c(){e=A("button"),te(t.$$.fragment),k(e,"class","copy-button svelte-1fonppu"),k(e,"aria-label","Copied"),k(e,"aria-roledescription","Text copied")},m(s,r){Y(s,e,r),se(t,e,null),o=!0},p:ye,i(s){o||(C(t.$$.fragment,s),s&&(l||Be(()=>{l=ln(e,pe,{duration:300}),l.start()})),o=!0)},o(s){I(t.$$.fragment,s),o=!1},d(s){s&&X(e),ne(t)}}}function gn(n){let e;return{c(){e=cn(n[4])},m(t,l){Y(t,e,l)},p(t,l){l[0]&16&&fn(e,t[4])},d(t){t&&X(e)}}}function ze(n){let e,t,l,o;function s(u){n[40](u)}let r={label:"Plain Text"};return n[12]!==void 0&&(r.checked=n[12]),t=new nn({props:r}),me.push(()=>nt(t,"checked",s)),{c(){e=A("div"),te(t.$$.fragment),k(e,"class","switch-container top-switch svelte-1fonppu")},m(u,a){Y(u,e,a),se(t,e,null),o=!0},p(u,a){const _={};!l&&a[0]&4096&&(l=!0,_.checked=u[12],tt(()=>l=!1)),t.$set(_)},i(u){o||(C(t.$$.fragment,u),o=!0)},o(u){I(t.$$.fragment,u),o=!1},d(u){u&&X(e),ne(t)}}}function mn(n){let e,t,l,o,s,r,u=n[16]&&Ue(n);return{c(){e=A("div"),t=A("textarea"),l=x(),u&&u.c(),k(t,"data-testid","textbox"),k(t,"placeholder",n[3]),k(t,"rows",5),t.disabled=n[6],k(t,"class","svelte-1fonppu"),k(e,"class","textarea-container")},m(a,_){Y(a,e,_),j(e,t),he(t,n[23]),n[61](t),j(e,l),u&&u.m(e,null),o=!0,s||(r=[z(t,"input",n[57]),z(t,"input",n[58]),z(t,"focus",n[59]),z(t,"keydown",n[60])],s=!0)},p(a,_){(!o||_[0]&8)&&k(t,"placeholder",a[3]),(!o||_[0]&64)&&(t.disabled=a[6]),_[0]&8388608&&he(t,a[23]),a[16]?u?(u.p(a,_),_[0]&65536&&C(u,1)):(u=Ue(a),u.c(),C(u,1),u.m(e,null)):u&&(ee(),I(u,1,1,()=>{u=null}),$())},i(a){o||(C(u),o=!0)},o(a){I(u),o=!1},d(a){a&&X(e),n[61](null),u&&u.d(),s=!1,st(r)}}}function bn(n){let e,t,l=je(n[13]),o=[];for(let r=0;r<l.length;r+=1)o[r]=Ke(Je(n,l,r));const s=r=>I(o[r],1,1,()=>{o[r]=null});return{c(){e=A("div");for(let r=0;r<o.length;r+=1)o[r].c();k(e,"class","dialogue-container svelte-1fonppu")},m(r,u){Y(r,e,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n[56](e),t=!0},p(r,u){if(u[0]&2133811790|u[1]&1){l=je(r[13]);let a;for(a=0;a<l.length;a+=1){const _=Je(r,l,a);o[a]?(o[a].p(_,u),C(o[a],1)):(o[a]=Ke(_),o[a].c(),C(o[a],1),o[a].m(e,null))}for(ee(),a=l.length;a<o.length;a+=1)s(a);$()}},i(r){if(!t){for(let u=0;u<l.length;u+=1)C(o[u]);t=!0}},o(r){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)I(o[u]);t=!1},d(r){r&&X(e),on(o,r),n[56](null)}}}function Ue(n){let e,t,l,o;return t=new et({props:{choices:n[2].map(Xe),filtered_indices:n[19].map(n[62]),active_index:n[19].map(n[63])[n[18]],show_options:!0}}),t.$on("change",n[64]),{c(){e=A("div"),te(t.$$.fragment),k(e,"id","tag-menu"),k(e,"class","tag-menu-plain-text svelte-1fonppu")},m(s,r){Y(s,e,r),se(t,e,null),o=!0},p(s,r){const u={};r[0]&4&&(u.choices=s[2].map(Xe)),r[0]&524292&&(u.filtered_indices=s[19].map(s[62])),r[0]&786436&&(u.active_index=s[19].map(s[63])[s[18]]),t.$set(u)},i(s){o||(C(t.$$.fragment,s),s&&Be(()=>{o&&(l||(l=ve(e,pe,{duration:100},!0)),l.run(1))}),o=!0)},o(s){I(t.$$.fragment,s),s&&(l||(l=ve(e,pe,{duration:100},!1)),l.run(0)),o=!1},d(s){s&&X(e),ne(t),s&&l&&l.end()}}}function pn(n){let e,t,l;function o(u){n[42](u,n[73])}function s(){return n[43](n[75],n[73])}let r={choices:n[1].map(Ve),show_label:!1,container:!0,label:""};return n[73].speaker!==void 0&&(r.value=n[73].speaker),e=new zt({props:r}),me.push(()=>nt(e,"value",o)),e.$on("change",s),{c(){te(e.$$.fragment)},m(u,a){se(e,u,a),l=!0},p(u,a){n=u;const _={};a[0]&2&&(_.choices=n[1].map(Ve)),!t&&a[0]&8192&&(t=!0,_.value=n[73].speaker,tt(()=>t=!1)),e.$set(_)},i(u){l||(C(e.$$.fragment,u),l=!0)},o(u){I(e.$$.fragment,u),l=!1},d(u){ne(e,u)}}}function kn(n){let e,t,l;function o(){n[41].call(e,n[74],n[75])}return{c(){e=A("textarea"),e.disabled=n[6],k(e,"rows","1"),e.readOnly=!0,k(e,"class","svelte-1fonppu")},m(s,r){Y(s,e,r),he(e,n[73].speaker),t||(l=z(e,"input",o),t=!0)},p(s,r){n=s,r[0]&64&&(e.disabled=n[6]),r[0]&8192&&he(e,n[73].speaker)},i:ye,o:ye,d(s){s&&X(e),t=!1,l()}}}function Fe(n){let e,t,l,o;return t=new et({props:{choices:n[2].map(We),filtered_indices:n[19].map(n[51]),active_index:n[19].map(n[52])[n[18]],show_options:!0,offset_from_top:n[21],from_top:!0}}),t.$on("change",n[53]),{c(){e=A("div"),te(t.$$.fragment),k(e,"id","tag-menu"),k(e,"class","tag-menu svelte-1fonppu")},m(s,r){Y(s,e,r),se(t,e,null),o=!0},p(s,r){const u={};r[0]&4&&(u.choices=s[2].map(We)),r[0]&524292&&(u.filtered_indices=s[19].map(s[51])),r[0]&786436&&(u.active_index=s[19].map(s[52])[s[18]]),r[0]&2097152&&(u.offset_from_top=s[21]),t.$set(u)},i(s){o||(C(t.$$.fragment,s),s&&Be(()=>{o&&(l||(l=ve(e,pe,{duration:100},!0)),l.run(1))}),o=!0)},o(s){I(t.$$.fragment,s),s&&(l||(l=ve(e,pe,{duration:100},!1)),l.run(0)),o=!1},d(s){s&&X(e),ne(t),s&&l&&l.end()}}}function Ge(n){let e,t,l,o,s,r;l=new qt({});function u(){return n[54](n[75])}return{c(){e=A("div"),t=A("button"),te(l.$$.fragment),k(t,"class","add-button svelte-1fonppu"),k(t,"aria-label","Add new line"),t.disabled=n[6],k(e,"class","svelte-1fonppu"),ae(e,"action-column",n[75]==0),ae(e,"hidden",n[6])},m(a,_){Y(a,e,_),j(e,t),se(l,t,null),o=!0,s||(r=z(t,"click",u),s=!0)},p(a,_){n=a,(!o||_[0]&64)&&(t.disabled=n[6]),(!o||_[0]&64)&&ae(e,"hidden",n[6])},i(a){o||(C(l.$$.fragment,a),o=!0)},o(a){I(l.$$.fragment,a),o=!1},d(a){a&&X(e),ne(l),s=!1,r()}}}function Ke(n){let e,t,l,o,s,r,u,a,_=n[75],d,v,m,S,J,L,Z,g,b,h;const H=[kn,pn],y=[];function q(B,f){return B[6]?0:1}l=q(n),o=y[l]=H[l](n);function O(){return n[44](n[73])}function K(){n[46].call(a,n[74],n[75])}function T(...B){return n[47](n[75],...B)}function U(...B){return n[48](n[75],...B)}function Q(...B){return n[49](n[75],...B)}const re=()=>n[50](a,_),ie=()=>n[50](null,_);let D=n[16]&&n[17]===n[75]&&Fe(n),p=(n[9]==null||n[9]&&n[75]<n[9]-1)&&Ge(n);L=new Ht({});function ue(){return n[55](n[75])}return{c(){e=A("div"),t=A("div"),o.c(),s=x(),r=A("div"),u=A("div"),a=A("textarea"),d=x(),D&&D.c(),v=x(),p&&p.c(),m=x(),S=A("div"),J=A("button"),te(L.$$.fragment),Z=x(),k(t,"class","speaker-column svelte-1fonppu"),k(t,"role","button"),k(t,"tabindex","0"),k(a,"placeholder",n[3]),a.disabled=n[6],k(a,"rows","1"),k(a,"class","svelte-1fonppu"),k(u,"class","input-container svelte-1fonppu"),k(r,"class","text-column svelte-1fonppu"),k(J,"class","delete-button svelte-1fonppu"),k(J,"aria-label","Remove current line"),J.disabled=n[6],k(S,"class","action-column svelte-1fonppu"),ae(S,"hidden",n[6]||n[75]==0),k(e,"class","dialogue-line svelte-1fonppu"),qe(e,"--speaker-bg-color",n[6]&&(n[24]===null||n[24]===n[73].speaker)&&n[25][n[73].speaker]||"transparent")},m(B,f){Y(B,e,f),j(e,t),y[l].m(t,null),j(e,s),j(e,r),j(r,u),j(u,a),he(a,n[73].text),re(),j(u,d),D&&D.m(u,null),j(e,v),p&&p.m(e,null),j(e,m),j(e,S),j(S,J),se(L,J,null),j(e,Z),g=!0,b||(h=[z(t,"mouseenter",O),z(t,"mouseleave",n[45]),z(a,"input",K),z(a,"input",T),z(a,"focus",U),z(a,"keydown",Q),z(J,"click",ue)],b=!0)},p(B,f){n=B;let le=l;l=q(n),l===le?y[l].p(n,f):(ee(),I(y[le],1,1,()=>{y[le]=null}),$(),o=y[l],o?o.p(n,f):(o=y[l]=H[l](n),o.c()),C(o,1),o.m(t,null)),(!g||f[0]&8)&&k(a,"placeholder",n[3]),(!g||f[0]&64)&&(a.disabled=n[6]),f[0]&8192&&he(a,n[73].text),_!==n[75]&&(ie(),_=n[75],re()),n[16]&&n[17]===n[75]?D?(D.p(n,f),f[0]&196608&&C(D,1)):(D=Fe(n),D.c(),C(D,1),D.m(u,null)):D&&(ee(),I(D,1,1,()=>{D=null}),$()),n[9]==null||n[9]&&n[75]<n[9]-1?p?(p.p(n,f),f[0]&512&&C(p,1)):(p=Ge(n),p.c(),C(p,1),p.m(e,m)):p&&(ee(),I(p,1,1,()=>{p=null}),$()),(!g||f[0]&64)&&(J.disabled=n[6]),(!g||f[0]&64)&&ae(S,"hidden",n[6]||n[75]==0),(!g||f[0]&50339904)&&qe(e,"--speaker-bg-color",n[6]&&(n[24]===null||n[24]===n[73].speaker)&&n[25][n[73].speaker]||"transparent")},i(B){g||(C(o),C(D),C(p),C(L.$$.fragment,B),g=!0)},o(B){I(o),I(D),I(p),I(L.$$.fragment,B),g=!1},d(B){B&&X(e),y[l].d(),ie(),D&&D.d(),p&&p.d(),ne(L),b=!1,st(h)}}}function Qe(n){let e,t,l,o,s,r;return l=new Jt({}),{c(){e=A("div"),t=A("button"),te(l.$$.fragment),k(t,"class","submit-button svelte-1fonppu"),t.disabled=n[6],k(e,"class","submit-container svelte-1fonppu")},m(u,a){Y(u,e,a),j(e,t),se(l,t,null),o=!0,s||(r=z(t,"click",n[35]),s=!0)},p(u,a){(!o||a[0]&64)&&(t.disabled=u[6])},i(u){o||(C(l.$$.fragment,u),o=!0)},o(u){I(l.$$.fragment,u),o=!1},d(u){u&&X(e),ne(l),s=!1,r()}}}function wn(n){let e,t,l,o,s,r,u,a,_,d,v,m=n[7]&&n[10]&&He(n);l=new Pt({props:{show_label:n[7],info:n[5],$$slots:{default:[gn]},$$scope:{ctx:n}}});let S=n[1].length!==0&&ze(n);const J=[bn,mn],L=[];function Z(b,h){return b[12]?1:0}r=Z(n),u=L[r]=J[r](n);let g=n[11]&&!n[6]&&Qe(n);return{c(){e=A("label"),m&&m.c(),t=x(),te(l.$$.fragment),o=x(),S&&S.c(),s=x(),u.c(),a=x(),g&&g.c(),k(e,"class","svelte-1fonppu"),ae(e,"container",n[8])},m(b,h){Y(b,e,h),m&&m.m(e,null),j(e,t),se(l,e,null),j(e,o),S&&S.m(e,null),j(e,s),L[r].m(e,null),j(e,a),g&&g.m(e,null),_=!0,d||(v=z(window,"click",n[32]),d=!0)},p(b,h){b[7]&&b[10]?m?(m.p(b,h),h[0]&1152&&C(m,1)):(m=He(b),m.c(),C(m,1),m.m(e,t)):m&&(ee(),I(m,1,1,()=>{m=null}),$());const H={};h[0]&128&&(H.show_label=b[7]),h[0]&32&&(H.info=b[5]),h[0]&16|h[2]&16384&&(H.$$scope={dirty:h,ctx:b}),l.$set(H),b[1].length!==0?S?(S.p(b,h),h[0]&2&&C(S,1)):(S=ze(b),S.c(),C(S,1),S.m(e,s)):S&&(ee(),I(S,1,1,()=>{S=null}),$());let y=r;r=Z(b),r===y?L[r].p(b,h):(ee(),I(L[y],1,1,()=>{L[y]=null}),$(),u=L[r],u?u.p(b,h):(u=L[r]=J[r](b),u.c()),C(u,1),u.m(e,a)),b[11]&&!b[6]?g?(g.p(b,h),h[0]&2112&&C(g,1)):(g=Qe(b),g.c(),C(g,1),g.m(e,null)):g&&(ee(),I(g,1,1,()=>{g=null}),$()),(!_||h[0]&256)&&ae(e,"container",b[8])},i(b){_||(C(m),C(l.$$.fragment,b),C(S),C(u),C(g),_=!0)},o(b){I(m),I(l.$$.fragment,b),I(S),I(u),I(g),_=!1},d(b){b&&X(e),m&&m.d(),ne(l),S&&S.d(),L[r].d(),g&&g.d(),d=!1,v()}}}function Cn(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const Ve=n=>[n,n],We=(n,e)=>[n,e],Xe=(n,e)=>[n,e];function Sn(n,e,t){let{speakers:l=[]}=e,{tags:o=[]}=e,{value:s=[]}=e,{value_is_output:r=!1}=e,{placeholder:u=void 0}=e,{label:a}=e,{info:_=void 0}=e,{disabled:d=!1}=e,{show_label:v=!0}=e,{container:m=!0}=e,{max_lines:S=void 0}=e,{show_copy_button:J=!1}=e,{show_submit_button:L=!0}=e,{color_map:Z=null}=e,g=!1,{server:b}=e,h=[],H,y=!1,q=-1,O=0,K=[],T=[],U,Q=JSON.stringify(s),re=0,ie=!1,D,p="",ue=null;const B=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],f={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let le={};l.length===0&&(g=!0,s="");function Ne(i){const c=l.length>0?l[0]:"";if(t(13,h=[...h.slice(0,i+1),{speaker:c,text:""},...h.slice(i+1)]),typeof s!="string"){const w=s.map(P=>`${P.speaker}: ${P.text}`).join(" ");t(23,p=w)}ce().then(()=>{T[i+1]&&T[i+1].focus()})}function Ae(i){if(t(13,h=[...h.slice(0,i),...h.slice(i+1)]),typeof s!="string"){const c=s.map(w=>`${w.speaker}: ${w.text}`).join(" ");t(23,p=c)}}function ke(i,c,w){if(t(13,h[i][c]=w,h),t(13,h=[...h]),typeof w!="string"){const P=h.map(R=>`${R.speaker}: ${R.text}`).join(" ");t(23,p=P)}}function de(i,c){const w=i.target||HTMLTextAreaElement;w&&!T[c]&&t(14,T[c]=w,T);const P=w.selectionStart||0,R=w.value;let F=!1,V=-1;if(R[P-1]===":"){t(17,q=c),V=P;const E=Cn(R,P);t(19,K=o.filter(M=>E===""||M.toLowerCase().includes(E.toLowerCase()))),F=K.length>0,t(18,O=0)}else{const E=R.lastIndexOf(":",P-1);if(E>=0&&!R.substring(E+1,P).includes(" ")){t(17,q=c),V=E+1;const M=R.substring(E+1,P);t(19,K=o.filter(W=>M===""||W.toLowerCase().includes(M.toLowerCase()))),F=K.length>0,t(18,O=0)}}if(F&&V!==-1){t(16,y=!0);const E=w.getBoundingClientRect();if(H){const M=H.getBoundingClientRect();t(21,re=M.top+E.height*(c+1.5))}}else t(16,y=!1)}function Ie(){const i=K[O];if(i){let c,w;g?(w=U,c=p):(w=T[q],c=h[q].text);const P=w?.selectionStart||0,R=c.lastIndexOf(":",P-1);if(R>=0){const F=c.substring(0,R),V=c.substring(P);if(g){const E=`${F}${i} ${V}`;if(t(23,p=E),l.length===0)t(0,s=E);else{const M=fe(E);t(0,s=[...M])}ce().then(()=>{if(U){const M=F.length+i.length+1;U.setSelectionRange(M,M),U.focus()}})}else{const E=F.replace(/\[S\d+\]/g,"").trim(),M=`${E}${i} ${V}`;ke(q,"text",M),ce().then(()=>{const W=T[q];if(W){const oe=E.length+i.length+1;W.setSelectionRange(oe,oe),W.focus()}})}}t(16,y=!1),t(18,O=0)}}function Te(i){const c=o[i.detail.target.dataset.index];if(c){let w,P;g?(P=U,w=p):(P=T[q],w=h[q].text);const R=P?.selectionStart||0,F=w.lastIndexOf(":",R-1);if(F>=0){const V=w.substring(0,F),E=w.substring(R);if(g){const M=`${V}${c} ${E}`;if(t(23,p=M),l.length===0)t(0,s=M);else{const W=fe(M);t(0,s=[...W])}ce().then(()=>{if(U){const W=V.length+c.length+1;U.setSelectionRange(W,W),U.focus()}})}else{const M=V.replace(/\[S\d+\]/g,"").trim(),W=`${M}${c} ${E}`;ke(q,"text",W),ce().then(()=>{const oe=T[q];if(oe){const Ce=M.length+c.length+1;oe.setSelectionRange(Ce,Ce),oe.focus()}})}}t(16,y=!1),t(18,O=0)}}function lt(i){if(y){const c=i.target,w=document.getElementById("tag-menu");w&&!w.contains(c)&&t(16,y=!1)}}const we=_n();function Pe(){we("change",s),r||we("input")}function it(i){if(l.length!==0&&(t(0,s=[...i]),JSON.stringify(s)!==Q)){Pe(),t(39,Q=JSON.stringify(s));const c=s.map(w=>`${w.speaker}: ${w.text}`).join(" ");t(23,p=c)}}async function ot(i){return typeof i=="string"?i:await b.format(i)}function fe(i){if(!i.trim())return[{speaker:l[0]||"",text:""}];const c=[],w=[],P=/\b(Speaker\s+\d+):\s*/g;let R;for(;(R=P.exec(i))!==null;)w.push({speaker:R[1].trim(),startIndex:R.index,endIndex:R.index+R[0].length});if(w.length===0)c.push({speaker:l[0]||"",text:i.trim()});else for(let F=0;F<w.length;F++){const V=w[F],E=w[F+1],M=V.endIndex,W=E?E.startIndex:i.length,oe=i.substring(M,W).trim();c.push({speaker:l.find(Ce=>Ce.toLowerCase()===V.speaker.toLowerCase())||V.speaker,text:oe})}return c}async function rt(){if("clipboard"in navigator){const i=await ot(s);await navigator.clipboard.writeText(i),we("copy",{value:i}),ut()}}function ut(){t(22,ie=!0),D&&clearTimeout(D),D=setTimeout(()=>{t(22,ie=!1)},1e3)}function at(){if(g)if(l.length===0)t(0,s=p);else{const i=fe(p);t(0,s=[...i])}we("submit")}function ft(i){g=i,t(12,g)}function ct(i,c){i[c].speaker=this.value,t(13,h),t(0,s),t(1,l),t(39,Q),t(12,g)}function _t(i,c){n.$$.not_equal(c.speaker,i)&&(c.speaker=i,t(13,h),t(0,s),t(1,l),t(39,Q),t(12,g))}const ht=(i,c)=>ke(i,"speaker",c.speaker),dt=i=>d&&t(24,ue=i.speaker),gt=()=>d&&t(24,ue=null);function mt(i,c){i[c].text=this.value,t(13,h),t(0,s),t(1,l),t(39,Q),t(12,g)}const bt=(i,c)=>de(c,i),pt=(i,c)=>de(c,i),kt=(i,c)=>{c.key==="Escape"&&y?(t(16,y=!1),t(18,O=0),c.preventDefault()):y&&q===i&&(c.key==="ArrowDown"?(t(18,O=Math.min(O+1,K.length-1)),c.preventDefault()):c.key==="ArrowUp"?(t(18,O=Math.max(O-1,0)),c.preventDefault()):c.key==="Enter"&&(K[O]&&Ie(),c.preventDefault()))};function wt(i,c){me[i?"unshift":"push"](()=>{T[c]=i,t(14,T),t(13,h),t(0,s),t(1,l),t(39,Q),t(12,g)})}const Ct=i=>o.indexOf(i),St=i=>o.indexOf(i),vt=i=>Te(i),yt=i=>Ne(i),It=i=>Ae(i);function Tt(i){me[i?"unshift":"push"](()=>{H=i,t(15,H)})}function Dt(){p=this.value,t(23,p),t(0,s),t(13,h),t(1,l),t(39,Q),t(12,g)}const Ot=i=>{if(de(i,0),l.length===0)t(0,s=p);else{const c=fe(p);t(0,s=[...c])}},Bt=i=>de(i,0),Et=i=>{i.key==="Escape"&&y?(t(16,y=!1),t(18,O=0),i.preventDefault()):y&&(i.key==="ArrowDown"?(t(18,O=Math.min(O+1,K.length-1)),i.preventDefault()):i.key==="ArrowUp"?(t(18,O=Math.max(O-1,0)),i.preventDefault()):i.key==="Enter"&&(K[O]&&Ie(),i.preventDefault()))};function Mt(i){me[i?"unshift":"push"](()=>{U=i,t(20,U)})}const Lt=i=>o.indexOf(i),Nt=i=>o.indexOf(i),At=i=>Te(i);return n.$$set=i=>{"speakers"in i&&t(1,l=i.speakers),"tags"in i&&t(2,o=i.tags),"value"in i&&t(0,s=i.value),"value_is_output"in i&&t(36,r=i.value_is_output),"placeholder"in i&&t(3,u=i.placeholder),"label"in i&&t(4,a=i.label),"info"in i&&t(5,_=i.info),"disabled"in i&&t(6,d=i.disabled),"show_label"in i&&t(7,v=i.show_label),"container"in i&&t(8,m=i.container),"max_lines"in i&&t(9,S=i.max_lines),"show_copy_button"in i&&t(10,J=i.show_copy_button),"show_submit_button"in i&&t(11,L=i.show_submit_button),"color_map"in i&&t(37,Z=i.color_map),"server"in i&&t(38,b=i.server)},n.$$.update=()=>{if(n.$$.dirty[0]&2|n.$$.dirty[1]&64&&(Z?t(25,le={...Z}):(t(25,le={}),l.forEach((i,c)=>{const w=B[c%B.length];t(25,le[i]=f[w],le)}))),n.$$.dirty[0]&8195&&s&&s.length===0&&h.length===0&&l.length!==0&&(t(13,h=[{speaker:l[0],text:""}]),t(0,s=[...h]),typeof s!="string")){const i=s.map(c=>`${c.speaker}: ${c.text}`).join(" ");t(23,p=i)}if(n.$$.dirty[0]&4099|n.$$.dirty[1]&256&&JSON.stringify(s)!==Q){if(s==null&&t(13,h=[]),t(39,Q=JSON.stringify(s)),s&&typeof s!="string"){t(13,h=[...s]);const i=s.map(c=>`${c.speaker}: ${c.text}`).join(" ");t(23,p=i)}else t(23,p=s),!g&&l.length>0&&s&&t(13,h=fe(s));Pe()}n.$$.dirty[0]&24576&&(h.length>T.length?t(14,T=[...T,...Array(h.length-T.length).fill(null)]):h.length<T.length&&t(14,T=T.slice(0,h.length)),ce().then(()=>{T.forEach(i=>{i&&i instanceof HTMLTextAreaElement&&(i.style.height="auto",i.style.height=i.scrollHeight+"px")})})),n.$$.dirty[0]&8192&&it(h)},[s,l,o,u,a,_,d,v,m,S,J,L,g,h,T,H,y,q,O,K,U,re,ie,p,ue,le,Ne,Ae,ke,de,Ie,Te,lt,fe,rt,at,r,Z,b,Q,ft,ct,_t,ht,dt,gt,mt,bt,pt,kt,wt,Ct,St,vt,yt,It,Tt,Dt,Ot,Bt,Et,Mt,Lt,Nt,At]}class vn extends sn{constructor(e){super(),un(this,e,Sn,wn,an,{speakers:1,tags:2,value:0,value_is_output:36,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:37,server:38},null,[-1,-1,-1])}get speakers(){return this.$$.ctx[1]}set speakers(e){this.$$set({speakers:e}),G()}get tags(){return this.$$.ctx[2]}set tags(e){this.$$set({tags:e}),G()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),G()}get value_is_output(){return this.$$.ctx[36]}set value_is_output(e){this.$$set({value_is_output:e}),G()}get placeholder(){return this.$$.ctx[3]}set placeholder(e){this.$$set({placeholder:e}),G()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),G()}get info(){return this.$$.ctx[5]}set info(e){this.$$set({info:e}),G()}get disabled(){return this.$$.ctx[6]}set disabled(e){this.$$set({disabled:e}),G()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),G()}get container(){return this.$$.ctx[8]}set container(e){this.$$set({container:e}),G()}get max_lines(){return this.$$.ctx[9]}set max_lines(e){this.$$set({max_lines:e}),G()}get show_copy_button(){return this.$$.ctx[10]}set show_copy_button(e){this.$$set({show_copy_button:e}),G()}get show_submit_button(){return this.$$.ctx[11]}set show_submit_button(e){this.$$set({show_submit_button:e}),G()}get color_map(){return this.$$.ctx[37]}set color_map(e){this.$$set({color_map:e}),G()}get server(){return this.$$.ctx[38]}set server(e){this.$$set({server:e}),G()}}const yn=vn,{SvelteComponent:In,add_flush_callback:Ye,assign:Tn,bind:Ze,binding_callbacks:xe,check_outros:Dn,create_component:Ee,destroy_component:Me,detach:On,flush:N,get_spread_object:Bn,get_spread_update:En,group_outros:Mn,init:Ln,insert:Nn,mount_component:Le,safe_not_equal:An,space:Pn,transition_in:_e,transition_out:be}=window.__gradio__svelte__internal;function $e(n){let e,t;const l=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let o={};for(let s=0;s<l.length;s+=1)o=Tn(o,l[s]);return e=new Ft({props:o}),e.$on("clear_status",n[21]),{c(){Ee(e.$$.fragment)},m(s,r){Le(e,s,r),t=!0},p(s,r){const u=r[0]&262148?En(l,[r[0]&4&&{autoscroll:s[2].autoscroll},r[0]&4&&{i18n:s[2].i18n},r[0]&262144&&Bn(s[18])]):{};e.$set(u)},i(s){t||(_e(e.$$.fragment,s),t=!0)},o(s){be(e.$$.fragment,s),t=!1},d(s){Me(e,s)}}}function Rn(n){let e,t,l,o,s,r=n[18]&&$e(n);function u(d){n[22](d)}function a(d){n[23](d)}let _={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],disabled:!n[19]};return n[0]!==void 0&&(_.value=n[0]),n[1]!==void 0&&(_.value_is_output=n[1]),t=new yn({props:_}),xe.push(()=>Ze(t,"value",u)),xe.push(()=>Ze(t,"value_is_output",a)),t.$on("change",n[24]),t.$on("input",n[25]),t.$on("submit",n[26]),t.$on("blur",n[27]),t.$on("select",n[28]),t.$on("focus",n[29]),t.$on("copy",n[30]),{c(){r&&r.c(),e=Pn(),Ee(t.$$.fragment)},m(d,v){r&&r.m(d,v),Nn(d,e,v),Le(t,d,v),s=!0},p(d,v){d[18]?r?(r.p(d,v),v[0]&262144&&_e(r,1)):(r=$e(d),r.c(),_e(r,1),r.m(e.parentNode,e)):r&&(Mn(),be(r,1,1,()=>{r=null}),Dn());const m={};v[0]&16&&(m.label=d[4]),v[0]&128&&(m.info=d[7]),v[0]&4096&&(m.show_label=d[12]),v[0]&8192&&(m.max_lines=d[13]),v[0]&131072&&(m.show_copy_button=d[17]),v[0]&16384&&(m.container=d[14]),v[0]&32&&(m.speakers=d[5]),v[0]&64&&(m.tags=d[6]),v[0]&256&&(m.placeholder=d[8]),v[0]&1048576&&(m.show_submit_button=d[20]),v[0]&8&&(m.server=d[3]),v[0]&524288&&(m.disabled=!d[19]),!l&&v[0]&1&&(l=!0,m.value=d[0],Ye(()=>l=!1)),!o&&v[0]&2&&(o=!0,m.value_is_output=d[1],Ye(()=>o=!1)),t.$set(m)},i(d){s||(_e(r),_e(t.$$.fragment,d),s=!0)},o(d){be(r),be(t.$$.fragment,d),s=!1},d(d){d&&On(e),r&&r.d(d),Me(t,d)}}}function jn(n){let e,t;return e=new Ut({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[Rn]},$$scope:{ctx:n}}}),{c(){Ee(e.$$.fragment)},m(l,o){Le(e,l,o),t=!0},p(l,o){const s={};o[0]&2048&&(s.visible=l[11]),o[0]&512&&(s.elem_id=l[9]),o[0]&1024&&(s.elem_classes=l[10]),o[0]&32768&&(s.scale=l[15]),o[0]&65536&&(s.min_width=l[16]),o[0]&16384&&(s.padding=l[14]),o[0]&1995263|o[1]&1&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){t||(_e(e.$$.fragment,l),t=!0)},o(l){be(e.$$.fragment,l),t=!1},d(l){Me(e,l)}}}function qn(n,e,t){let{gradio:l}=e,{server:o}=e,{label:s="Dialogue"}=e,{speakers:r=[]}=e,{tags:u=[]}=e,{info:a=void 0}=e,{placeholder:_=void 0}=e,{elem_id:d=""}=e,{elem_classes:v=[]}=e,{visible:m=!0}=e,{value:S=[]}=e,{show_label:J}=e,{max_lines:L=void 0}=e,{container:Z=!0}=e,{scale:g=null}=e,{min_width:b=void 0}=e,{show_copy_button:h=!1}=e,{loading_status:H=void 0}=e,{value_is_output:y=!1}=e,{interactive:q}=e,{show_submit_button:O=!0}=e;const K=()=>l.dispatch("clear_status",H);function T(f){S=f,t(0,S)}function U(f){y=f,t(1,y)}const Q=()=>l.dispatch("change",S),re=()=>l.dispatch("input"),ie=()=>l.dispatch("submit"),D=()=>l.dispatch("blur"),p=f=>l.dispatch("select",f.detail),ue=()=>l.dispatch("focus"),B=f=>l.dispatch("copy",f.detail);return n.$$set=f=>{"gradio"in f&&t(2,l=f.gradio),"server"in f&&t(3,o=f.server),"label"in f&&t(4,s=f.label),"speakers"in f&&t(5,r=f.speakers),"tags"in f&&t(6,u=f.tags),"info"in f&&t(7,a=f.info),"placeholder"in f&&t(8,_=f.placeholder),"elem_id"in f&&t(9,d=f.elem_id),"elem_classes"in f&&t(10,v=f.elem_classes),"visible"in f&&t(11,m=f.visible),"value"in f&&t(0,S=f.value),"show_label"in f&&t(12,J=f.show_label),"max_lines"in f&&t(13,L=f.max_lines),"container"in f&&t(14,Z=f.container),"scale"in f&&t(15,g=f.scale),"min_width"in f&&t(16,b=f.min_width),"show_copy_button"in f&&t(17,h=f.show_copy_button),"loading_status"in f&&t(18,H=f.loading_status),"value_is_output"in f&&t(1,y=f.value_is_output),"interactive"in f&&t(19,q=f.interactive),"show_submit_button"in f&&t(20,O=f.show_submit_button)},[S,y,l,o,s,r,u,a,_,d,v,m,J,L,Z,g,b,h,H,q,O,K,T,U,Q,re,ie,D,p,ue,B]}class rs extends In{constructor(e){super(),Ln(this,e,qn,jn,An,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),N()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),N()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),N()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),N()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),N()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),N()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),N()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),N()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),N()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),N()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),N()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),N()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),N()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),N()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),N()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),N()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(e){this.$$set({show_copy_button:e}),N()}get loading_status(){return this.$$.ctx[18]}set loading_status(e){this.$$set({loading_status:e}),N()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),N()}get interactive(){return this.$$.ctx[19]}set interactive(e){this.$$set({interactive:e}),N()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(e){this.$$set({show_submit_button:e}),N()}}export{yn as BaseDialogue,fs as BaseExample,rs as default};
//# sourceMappingURL=Index-BKUd_dIi.js.map
