import{SvelteComponent as Ae,init as Ne,safe_not_equal as Ve,element as B,space as le,text as Ye,claim_element as A,children as N,detach as v,claim_space as ie,claim_text as Ze,attr as b,set_style as Be,insert_hydration as F,append_hydration as L,listen as z,set_data as xe,noop as ke,create_component as $,claim_component as ee,toggle_class as ge,mount_component as te,transition_in as p,group_outros as oe,transition_out as D,check_outros as re,destroy_component as ne,createEventDispatcher as Nt,tick as pe,empty as Re,binding_callbacks as me,bind as De,add_flush_callback as Ie,add_render_callback as Le,create_in_transition as Vt,set_input_value as we,run_all as $e,ensure_array_like as Pe,destroy_each as Lt,create_bidirectional_transition as Se,flush as j,assign as Mt,get_spread_update as Rt,get_spread_object as Pt}from"../../../svelte/svelte.js";import{fade as Ee}from"../../../svelte/svelte-submodules.js";import{y as Ut,O as jt,G as Jt,F as Ht,B as Xt,S as qt}from"./2.BnXZFkJe.js";import{P as zt}from"./Plus.aV-xa-_T.js";import{T as Ft}from"./Trash.D4IfxcH_.js";import{D as et,c as Gt}from"./Dropdown.B_QPIuYM.js";/* empty css                                              */import{default as En}from"./Example.FcPgDijm.js";function Kt(n){let t,e,l,r,s,i,o;return{c(){t=B("div"),e=B("button"),l=le(),r=B("span"),s=Ye(n[1]),this.h()},l(a){t=A(a,"DIV",{class:!0,style:!0});var c=N(t);e=A(c,"BUTTON",{role:!0,"aria-checked":!0,class:!0});var d=N(e);d.forEach(v),l=ie(c),r=A(c,"SPAN",{});var C=N(r);s=Ze(C,n[1]),C.forEach(v),c.forEach(v),this.h()},h(){b(e,"role","switch"),b(e,"aria-checked",n[0]),e.disabled=n[2],b(e,"class","svelte-1wr5wa"),b(t,"class","s s--slider svelte-1wr5wa"),Be(t,"font-size","var(--font-size-sm)px")},m(a,c){F(a,t,c),L(t,e),L(t,l),L(t,r),L(r,s),i||(o=z(e,"click",n[3]),i=!0)},p(a,[c]){c&1&&b(e,"aria-checked",a[0]),c&4&&(e.disabled=a[2]),c&2&&xe(s,a[1])},i:ke,o:ke,d(a){a&&v(t),i=!1,o()}}}function Qt(n,t,e){let{label:l}=t,{checked:r=!1}=t,{disabled:s=!1}=t;function i(o){const c=o.target.getAttribute("aria-checked");e(0,r=c!=="true")}return n.$$set=o=>{"label"in o&&e(1,l=o.label),"checked"in o&&e(0,r=o.checked),"disabled"in o&&e(2,s=o.disabled)},[r,l,s,i]}class Wt extends Ae{constructor(t){super(),Ne(this,t,Qt,Kt,Ve,{label:1,checked:0,disabled:2})}}function Ue(n,t,e){const l=n.slice();return l[73]=t[e],l[74]=t,l[75]=e,l}function je(n){let t,e,l,r;const s=[Zt,Yt],i=[];function o(a,c){return a[22]?0:1}return t=o(n),e=i[t]=s[t](n),{c(){e.c(),l=Re()},l(a){e.l(a),l=Re()},m(a,c){i[t].m(a,c),F(a,l,c),r=!0},p(a,c){let d=t;t=o(a),t===d?i[t].p(a,c):(oe(),D(i[d],1,1,()=>{i[d]=null}),re(),e=i[t],e?e.p(a,c):(e=i[t]=s[t](a),e.c()),p(e,1),e.m(l.parentNode,l))},i(a){r||(p(e),r=!0)},o(a){D(e),r=!1},d(a){a&&v(l),i[t].d(a)}}}function Yt(n){let t,e,l,r,s;return e=new Jt({}),{c(){t=B("button"),$(e.$$.fragment),this.h()},l(i){t=A(i,"BUTTON",{class:!0,"aria-label":!0,"aria-roledescription":!0});var o=N(t);ee(e.$$.fragment,o),o.forEach(v),this.h()},h(){b(t,"class","copy-button svelte-1fonppu"),b(t,"aria-label","Copy"),b(t,"aria-roledescription","Copy text")},m(i,o){F(i,t,o),te(e,t,null),l=!0,r||(s=z(t,"click",n[34]),r=!0)},p:ke,i(i){l||(p(e.$$.fragment,i),l=!0)},o(i){D(e.$$.fragment,i),l=!1},d(i){i&&v(t),ne(e),r=!1,s()}}}function Zt(n){let t,e,l,r;return e=new Ht({}),{c(){t=B("button"),$(e.$$.fragment),this.h()},l(s){t=A(s,"BUTTON",{class:!0,"aria-label":!0,"aria-roledescription":!0});var i=N(t);ee(e.$$.fragment,i),i.forEach(v),this.h()},h(){b(t,"class","copy-button svelte-1fonppu"),b(t,"aria-label","Copied"),b(t,"aria-roledescription","Text copied")},m(s,i){F(s,t,i),te(e,t,null),r=!0},p:ke,i(s){r||(p(e.$$.fragment,s),s&&(l||Le(()=>{l=Vt(t,Ee,{duration:300}),l.start()})),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){s&&v(t),ne(e)}}}function xt(n){let t;return{c(){t=Ye(n[4])},l(e){t=Ze(e,n[4])},m(e,l){F(e,t,l)},p(e,l){l[0]&16&&xe(t,e[4])},d(e){e&&v(t)}}}function Je(n){let t,e,l,r;function s(o){n[40](o)}let i={label:"Plain Text"};return n[12]!==void 0&&(i.checked=n[12]),e=new Wt({props:i}),me.push(()=>De(e,"checked",s)),{c(){t=B("div"),$(e.$$.fragment),this.h()},l(o){t=A(o,"DIV",{class:!0});var a=N(t);ee(e.$$.fragment,a),a.forEach(v),this.h()},h(){b(t,"class","switch-container top-switch svelte-1fonppu")},m(o,a){F(o,t,a),te(e,t,null),r=!0},p(o,a){const c={};!l&&a[0]&4096&&(l=!0,c.checked=o[12],Ie(()=>l=!1)),e.$set(c)},i(o){r||(p(e.$$.fragment,o),r=!0)},o(o){D(e.$$.fragment,o),r=!1},d(o){o&&v(t),ne(e)}}}function $t(n){let t,e,l,r,s,i,o=n[16]&&He(n);return{c(){t=B("div"),e=B("textarea"),l=le(),o&&o.c(),this.h()},l(a){t=A(a,"DIV",{class:!0});var c=N(t);e=A(c,"TEXTAREA",{"data-testid":!0,placeholder:!0,rows:!0,class:!0}),N(e).forEach(v),l=ie(c),o&&o.l(c),c.forEach(v),this.h()},h(){b(e,"data-testid","textbox"),b(e,"placeholder",n[3]),b(e,"rows",5),e.disabled=n[6],b(e,"class","svelte-1fonppu"),b(t,"class","textarea-container")},m(a,c){F(a,t,c),L(t,e),we(e,n[23]),n[61](e),L(t,l),o&&o.m(t,null),r=!0,s||(i=[z(e,"input",n[57]),z(e,"input",n[58]),z(e,"focus",n[59]),z(e,"keydown",n[60])],s=!0)},p(a,c){(!r||c[0]&8)&&b(e,"placeholder",a[3]),(!r||c[0]&64)&&(e.disabled=a[6]),c[0]&8388608&&we(e,a[23]),a[16]?o?(o.p(a,c),c[0]&65536&&p(o,1)):(o=He(a),o.c(),p(o,1),o.m(t,null)):o&&(oe(),D(o,1,1,()=>{o=null}),re())},i(a){r||(p(o),r=!0)},o(a){D(o),r=!1},d(a){a&&v(t),n[61](null),o&&o.d(),s=!1,$e(i)}}}function en(n){let t,e,l=Pe(n[13]),r=[];for(let i=0;i<l.length;i+=1)r[i]=ze(Ue(n,l,i));const s=i=>D(r[i],1,1,()=>{r[i]=null});return{c(){t=B("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=A(i,"DIV",{class:!0});var o=N(t);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(v),this.h()},h(){b(t,"class","dialogue-container svelte-1fonppu")},m(i,o){F(i,t,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null);n[56](t),e=!0},p(i,o){if(o[0]&2133811790|o[1]&1){l=Pe(i[13]);let a;for(a=0;a<l.length;a+=1){const c=Ue(i,l,a);r[a]?(r[a].p(c,o),p(r[a],1)):(r[a]=ze(c),r[a].c(),p(r[a],1),r[a].m(t,null))}for(oe(),a=l.length;a<r.length;a+=1)s(a);re()}},i(i){if(!e){for(let o=0;o<l.length;o+=1)p(r[o]);e=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);e=!1},d(i){i&&v(t),Lt(r,i),n[56](null)}}}function He(n){let t,e,l,r;return e=new et({props:{choices:n[2].map(Qe),filtered_indices:n[19].map(n[62]),active_index:n[19].map(n[63])[n[18]],show_options:!0}}),e.$on("change",n[64]),{c(){t=B("div"),$(e.$$.fragment),this.h()},l(s){t=A(s,"DIV",{id:!0,class:!0});var i=N(t);ee(e.$$.fragment,i),i.forEach(v),this.h()},h(){b(t,"id","tag-menu"),b(t,"class","tag-menu-plain-text svelte-1fonppu")},m(s,i){F(s,t,i),te(e,t,null),r=!0},p(s,i){const o={};i[0]&4&&(o.choices=s[2].map(Qe)),i[0]&524292&&(o.filtered_indices=s[19].map(s[62])),i[0]&786436&&(o.active_index=s[19].map(s[63])[s[18]]),e.$set(o)},i(s){r||(p(e.$$.fragment,s),s&&Le(()=>{r&&(l||(l=Se(t,Ee,{duration:100},!0)),l.run(1))}),r=!0)},o(s){D(e.$$.fragment,s),s&&(l||(l=Se(t,Ee,{duration:100},!1)),l.run(0)),r=!1},d(s){s&&v(t),ne(e),s&&l&&l.end()}}}function tn(n){let t,e,l;function r(o){n[42](o,n[73])}function s(){return n[43](n[75],n[73])}let i={choices:n[1].map(Ge),show_label:!1,container:!0,label:""};return n[73].speaker!==void 0&&(i.value=n[73].speaker),t=new Gt({props:i}),me.push(()=>De(t,"value",r)),t.$on("change",s),{c(){$(t.$$.fragment)},l(o){ee(t.$$.fragment,o)},m(o,a){te(t,o,a),l=!0},p(o,a){n=o;const c={};a[0]&2&&(c.choices=n[1].map(Ge)),!e&&a[0]&8192&&(e=!0,c.value=n[73].speaker,Ie(()=>e=!1)),t.$set(c)},i(o){l||(p(t.$$.fragment,o),l=!0)},o(o){D(t.$$.fragment,o),l=!1},d(o){ne(t,o)}}}function nn(n){let t,e,l;function r(){n[41].call(t,n[74],n[75])}return{c(){t=B("textarea"),this.h()},l(s){t=A(s,"TEXTAREA",{rows:!0,class:!0}),N(t).forEach(v),this.h()},h(){t.disabled=n[6],b(t,"rows","1"),t.readOnly=!0,b(t,"class","svelte-1fonppu")},m(s,i){F(s,t,i),we(t,n[73].speaker),e||(l=z(t,"input",r),e=!0)},p(s,i){n=s,i[0]&64&&(t.disabled=n[6]),i[0]&8192&&we(t,n[73].speaker)},i:ke,o:ke,d(s){s&&v(t),e=!1,l()}}}function Xe(n){let t,e,l,r;return e=new et({props:{choices:n[2].map(Ke),filtered_indices:n[19].map(n[51]),active_index:n[19].map(n[52])[n[18]],show_options:!0,offset_from_top:n[21],from_top:!0}}),e.$on("change",n[53]),{c(){t=B("div"),$(e.$$.fragment),this.h()},l(s){t=A(s,"DIV",{id:!0,class:!0});var i=N(t);ee(e.$$.fragment,i),i.forEach(v),this.h()},h(){b(t,"id","tag-menu"),b(t,"class","tag-menu svelte-1fonppu")},m(s,i){F(s,t,i),te(e,t,null),r=!0},p(s,i){const o={};i[0]&4&&(o.choices=s[2].map(Ke)),i[0]&524292&&(o.filtered_indices=s[19].map(s[51])),i[0]&786436&&(o.active_index=s[19].map(s[52])[s[18]]),i[0]&2097152&&(o.offset_from_top=s[21]),e.$set(o)},i(s){r||(p(e.$$.fragment,s),s&&Le(()=>{r&&(l||(l=Se(t,Ee,{duration:100},!0)),l.run(1))}),r=!0)},o(s){D(e.$$.fragment,s),s&&(l||(l=Se(t,Ee,{duration:100},!1)),l.run(0)),r=!1},d(s){s&&v(t),ne(e),s&&l&&l.end()}}}function qe(n){let t,e,l,r,s,i;l=new zt({});function o(){return n[54](n[75])}return{c(){t=B("div"),e=B("button"),$(l.$$.fragment),this.h()},l(a){t=A(a,"DIV",{class:!0});var c=N(t);e=A(c,"BUTTON",{class:!0,"aria-label":!0});var d=N(e);ee(l.$$.fragment,d),d.forEach(v),c.forEach(v),this.h()},h(){b(e,"class","add-button svelte-1fonppu"),b(e,"aria-label","Add new line"),e.disabled=n[6],b(t,"class","svelte-1fonppu"),ge(t,"action-column",n[75]==0),ge(t,"hidden",n[6])},m(a,c){F(a,t,c),L(t,e),te(l,e,null),r=!0,s||(i=z(e,"click",o),s=!0)},p(a,c){n=a,(!r||c[0]&64)&&(e.disabled=n[6]),(!r||c[0]&64)&&ge(t,"hidden",n[6])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){D(l.$$.fragment,a),r=!1},d(a){a&&v(t),ne(l),s=!1,i()}}}function ze(n){let t,e,l,r,s,i,o,a,c=n[75],d,C,m,T,H,M,Q,g,k,_;const q=[nn,tn],I=[];function X(y,f){return y[6]?0:1}l=X(n),r=I[l]=q[l](n);function V(){return n[44](n[73])}function W(){n[46].call(a,n[74],n[75])}function O(...y){return n[47](n[75],...y)}function G(...y){return n[48](n[75],...y)}function Y(...y){return n[49](n[75],...y)}const ce=()=>n[50](a,c),ue=()=>n[50](null,c);let S=n[16]&&n[17]===n[75]&&Xe(n),w=(n[9]==null||n[9]&&n[75]<n[9]-1)&&qe(n);M=new Ft({});function _e(){return n[55](n[75])}return{c(){t=B("div"),e=B("div"),r.c(),s=le(),i=B("div"),o=B("div"),a=B("textarea"),d=le(),S&&S.c(),C=le(),w&&w.c(),m=le(),T=B("div"),H=B("button"),$(M.$$.fragment),Q=le(),this.h()},l(y){t=A(y,"DIV",{class:!0,style:!0});var f=N(t);e=A(f,"DIV",{class:!0,role:!0,tabindex:!0});var se=N(e);r.l(se),se.forEach(v),s=ie(f),i=A(f,"DIV",{class:!0});var ve=N(i);o=A(ve,"DIV",{class:!0});var he=N(o);a=A(he,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),N(a).forEach(v),d=ie(he),S&&S.l(he),he.forEach(v),ve.forEach(v),C=ie(f),w&&w.l(f),m=ie(f),T=A(f,"DIV",{class:!0});var de=N(T);H=A(de,"BUTTON",{class:!0,"aria-label":!0});var ae=N(H);ee(M.$$.fragment,ae),ae.forEach(v),de.forEach(v),Q=ie(f),f.forEach(v),this.h()},h(){b(e,"class","speaker-column svelte-1fonppu"),b(e,"role","button"),b(e,"tabindex","0"),b(a,"placeholder",n[3]),a.disabled=n[6],b(a,"rows","1"),b(a,"class","svelte-1fonppu"),b(o,"class","input-container svelte-1fonppu"),b(i,"class","text-column svelte-1fonppu"),b(H,"class","delete-button svelte-1fonppu"),b(H,"aria-label","Remove current line"),H.disabled=n[6],b(T,"class","action-column svelte-1fonppu"),ge(T,"hidden",n[6]||n[75]==0),b(t,"class","dialogue-line svelte-1fonppu"),Be(t,"--speaker-bg-color",n[6]&&(n[24]===null||n[24]===n[73].speaker)&&n[25][n[73].speaker]||"transparent")},m(y,f){F(y,t,f),L(t,e),I[l].m(e,null),L(t,s),L(t,i),L(i,o),L(o,a),we(a,n[73].text),ce(),L(o,d),S&&S.m(o,null),L(t,C),w&&w.m(t,null),L(t,m),L(t,T),L(T,H),te(M,H,null),L(t,Q),g=!0,k||(_=[z(e,"mouseenter",V),z(e,"mouseleave",n[45]),z(a,"input",W),z(a,"input",O),z(a,"focus",G),z(a,"keydown",Y),z(H,"click",_e)],k=!0)},p(y,f){n=y;let se=l;l=X(n),l===se?I[l].p(n,f):(oe(),D(I[se],1,1,()=>{I[se]=null}),re(),r=I[l],r?r.p(n,f):(r=I[l]=q[l](n),r.c()),p(r,1),r.m(e,null)),(!g||f[0]&8)&&b(a,"placeholder",n[3]),(!g||f[0]&64)&&(a.disabled=n[6]),f[0]&8192&&we(a,n[73].text),c!==n[75]&&(ue(),c=n[75],ce()),n[16]&&n[17]===n[75]?S?(S.p(n,f),f[0]&196608&&p(S,1)):(S=Xe(n),S.c(),p(S,1),S.m(o,null)):S&&(oe(),D(S,1,1,()=>{S=null}),re()),n[9]==null||n[9]&&n[75]<n[9]-1?w?(w.p(n,f),f[0]&512&&p(w,1)):(w=qe(n),w.c(),p(w,1),w.m(t,m)):w&&(oe(),D(w,1,1,()=>{w=null}),re()),(!g||f[0]&64)&&(H.disabled=n[6]),(!g||f[0]&64)&&ge(T,"hidden",n[6]||n[75]==0),(!g||f[0]&50339904)&&Be(t,"--speaker-bg-color",n[6]&&(n[24]===null||n[24]===n[73].speaker)&&n[25][n[73].speaker]||"transparent")},i(y){g||(p(r),p(S),p(w),p(M.$$.fragment,y),g=!0)},o(y){D(r),D(S),D(w),D(M.$$.fragment,y),g=!1},d(y){y&&v(t),I[l].d(),ue(),S&&S.d(),w&&w.d(),ne(M),k=!1,$e(_)}}}function Fe(n){let t,e,l,r,s,i;return l=new jt({}),{c(){t=B("div"),e=B("button"),$(l.$$.fragment),this.h()},l(o){t=A(o,"DIV",{class:!0});var a=N(t);e=A(a,"BUTTON",{class:!0});var c=N(e);ee(l.$$.fragment,c),c.forEach(v),a.forEach(v),this.h()},h(){b(e,"class","submit-button svelte-1fonppu"),e.disabled=n[6],b(t,"class","submit-container svelte-1fonppu")},m(o,a){F(o,t,a),L(t,e),te(l,e,null),r=!0,s||(i=z(e,"click",n[35]),s=!0)},p(o,a){(!r||a[0]&64)&&(e.disabled=o[6])},i(o){r||(p(l.$$.fragment,o),r=!0)},o(o){D(l.$$.fragment,o),r=!1},d(o){o&&v(t),ne(l),s=!1,i()}}}function sn(n){let t,e,l,r,s,i,o,a,c,d,C,m=n[7]&&n[10]&&je(n);l=new Ut({props:{show_label:n[7],info:n[5],$$slots:{default:[xt]},$$scope:{ctx:n}}});let T=n[1].length!==0&&Je(n);const H=[en,$t],M=[];function Q(k,_){return k[12]?1:0}i=Q(n),o=M[i]=H[i](n);let g=n[11]&&!n[6]&&Fe(n);return{c(){t=B("label"),m&&m.c(),e=le(),$(l.$$.fragment),r=le(),T&&T.c(),s=le(),o.c(),a=le(),g&&g.c(),this.h()},l(k){t=A(k,"LABEL",{class:!0});var _=N(t);m&&m.l(_),e=ie(_),ee(l.$$.fragment,_),r=ie(_),T&&T.l(_),s=ie(_),o.l(_),a=ie(_),g&&g.l(_),_.forEach(v),this.h()},h(){b(t,"class","svelte-1fonppu"),ge(t,"container",n[8])},m(k,_){F(k,t,_),m&&m.m(t,null),L(t,e),te(l,t,null),L(t,r),T&&T.m(t,null),L(t,s),M[i].m(t,null),L(t,a),g&&g.m(t,null),c=!0,d||(C=z(window,"click",n[32]),d=!0)},p(k,_){k[7]&&k[10]?m?(m.p(k,_),_[0]&1152&&p(m,1)):(m=je(k),m.c(),p(m,1),m.m(t,e)):m&&(oe(),D(m,1,1,()=>{m=null}),re());const q={};_[0]&128&&(q.show_label=k[7]),_[0]&32&&(q.info=k[5]),_[0]&16|_[2]&16384&&(q.$$scope={dirty:_,ctx:k}),l.$set(q),k[1].length!==0?T?(T.p(k,_),_[0]&2&&p(T,1)):(T=Je(k),T.c(),p(T,1),T.m(t,s)):T&&(oe(),D(T,1,1,()=>{T=null}),re());let I=i;i=Q(k),i===I?M[i].p(k,_):(oe(),D(M[I],1,1,()=>{M[I]=null}),re(),o=M[i],o?o.p(k,_):(o=M[i]=H[i](k),o.c()),p(o,1),o.m(t,a)),k[11]&&!k[6]?g?(g.p(k,_),_[0]&2112&&p(g,1)):(g=Fe(k),g.c(),p(g,1),g.m(t,null)):g&&(oe(),D(g,1,1,()=>{g=null}),re()),(!c||_[0]&256)&&ge(t,"container",k[8])},i(k){c||(p(m),p(l.$$.fragment,k),p(T),p(o),p(g),c=!0)},o(k){D(m),D(l.$$.fragment,k),D(T),D(o),D(g),c=!1},d(k){k&&v(t),m&&m.d(),ne(l),T&&T.d(),M[i].d(),g&&g.d(),d=!1,C()}}}function ln(n,t){const e=n.lastIndexOf(":",t-1);return e>=0?n.substring(e+1,t):""}const Ge=n=>[n,n],Ke=(n,t)=>[n,t],Qe=(n,t)=>[n,t];function on(n,t,e){let{speakers:l=[]}=t,{tags:r=[]}=t,{value:s=[]}=t,{value_is_output:i=!1}=t,{placeholder:o=void 0}=t,{label:a}=t,{info:c=void 0}=t,{disabled:d=!1}=t,{show_label:C=!0}=t,{container:m=!0}=t,{max_lines:T=void 0}=t,{show_copy_button:H=!1}=t,{show_submit_button:M=!0}=t,{color_map:Q=null}=t,g=!1,{server:k}=t,_=[],q,I=!1,X=-1,V=0,W=[],O=[],G,Y=JSON.stringify(s),ce=0,ue=!1,S,w="",_e=null;const y=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],f={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let se={};l.length===0&&(g=!0,s="");function ve(u){const h=l.length>0?l[0]:"";if(e(13,_=[..._.slice(0,u+1),{speaker:h,text:""},..._.slice(u+1)]),typeof s!="string"){const E=s.map(R=>`${R.speaker}: ${R.text}`).join(" ");e(23,w=E)}pe().then(()=>{O[u+1]&&O[u+1].focus()})}function he(u){if(e(13,_=[..._.slice(0,u),..._.slice(u+1)]),typeof s!="string"){const h=s.map(E=>`${E.speaker}: ${E.text}`).join(" ");e(23,w=h)}}function de(u,h,E){if(e(13,_[u][h]=E,_),e(13,_=[..._]),typeof E!="string"){const R=_.map(J=>`${J.speaker}: ${J.text}`).join(" ");e(23,w=R)}}function ae(u,h){const E=u.target||HTMLTextAreaElement;E&&!O[h]&&e(14,O[h]=E,O);const R=E.selectionStart||0,J=E.value;let K=!1,Z=-1;if(J[R-1]===":"){e(17,X=h),Z=R;const P=ln(J,R);e(19,W=r.filter(U=>P===""||U.toLowerCase().includes(P.toLowerCase()))),K=W.length>0,e(18,V=0)}else{const P=J.lastIndexOf(":",R-1);if(P>=0&&!J.substring(P+1,R).includes(" ")){e(17,X=h),Z=P+1;const U=J.substring(P+1,R);e(19,W=r.filter(x=>U===""||x.toLowerCase().includes(U.toLowerCase()))),K=W.length>0,e(18,V=0)}}if(K&&Z!==-1){e(16,I=!0);const P=E.getBoundingClientRect();if(q){const U=q.getBoundingClientRect();e(21,ce=U.top+P.height*(h+1.5))}}else e(16,I=!1)}function Oe(){const u=W[V];if(u){let h,E;g?(E=G,h=w):(E=O[X],h=_[X].text);const R=(E==null?void 0:E.selectionStart)||0,J=h.lastIndexOf(":",R-1);if(J>=0){const K=h.substring(0,J),Z=h.substring(R);if(g){const P=`${K}${u} ${Z}`;if(e(23,w=P),l.length===0)e(0,s=P);else{const U=be(P);e(0,s=[...U])}pe().then(()=>{if(G){const U=K.length+u.length+1;G.setSelectionRange(U,U),G.focus()}})}else{const P=K.replace(/\[S\d+\]/g,"").trim(),U=`${P}${u} ${Z}`;de(X,"text",U),pe().then(()=>{const x=O[X];if(x){const fe=P.length+u.length+1;x.setSelectionRange(fe,fe),x.focus()}})}}e(16,I=!1),e(18,V=0)}}function ye(u){const h=r[u.detail.target.dataset.index];if(h){let E,R;g?(R=G,E=w):(R=O[X],E=_[X].text);const J=(R==null?void 0:R.selectionStart)||0,K=E.lastIndexOf(":",J-1);if(K>=0){const Z=E.substring(0,K),P=E.substring(J);if(g){const U=`${Z}${h} ${P}`;if(e(23,w=U),l.length===0)e(0,s=U);else{const x=be(U);e(0,s=[...x])}pe().then(()=>{if(G){const x=Z.length+h.length+1;G.setSelectionRange(x,x),G.focus()}})}else{const U=Z.replace(/\[S\d+\]/g,"").trim(),x=`${U}${h} ${P}`;de(X,"text",x),pe().then(()=>{const fe=O[X];if(fe){const Ce=U.length+h.length+1;fe.setSelectionRange(Ce,Ce),fe.focus()}})}}e(16,I=!1),e(18,V=0)}}function tt(u){if(I){const h=u.target,E=document.getElementById("tag-menu");E&&!E.contains(h)&&e(16,I=!1)}}const Te=Nt();function Me(){Te("change",s),i||Te("input")}function nt(u){if(l.length!==0&&(e(0,s=[...u]),JSON.stringify(s)!==Y)){Me(),e(39,Y=JSON.stringify(s));const h=s.map(E=>`${E.speaker}: ${E.text}`).join(" ");e(23,w=h)}}async function st(u){return typeof u=="string"?u:await k.format(u)}function be(u){if(!u.trim())return[{speaker:l[0]||"",text:""}];const h=[],E=[],R=/\b(Speaker\s+\d+):\s*/g;let J;for(;(J=R.exec(u))!==null;)E.push({speaker:J[1].trim(),startIndex:J.index,endIndex:J.index+J[0].length});if(E.length===0)h.push({speaker:l[0]||"",text:u.trim()});else for(let K=0;K<E.length;K++){const Z=E[K],P=E[K+1],U=Z.endIndex,x=P?P.startIndex:u.length,fe=u.substring(U,x).trim();h.push({speaker:l.find(Ce=>Ce.toLowerCase()===Z.speaker.toLowerCase())||Z.speaker,text:fe})}return h}async function lt(){if("clipboard"in navigator){const u=await st(s);await navigator.clipboard.writeText(u),Te("copy",{value:u}),it()}}function it(){e(22,ue=!0),S&&clearTimeout(S),S=setTimeout(()=>{e(22,ue=!1)},1e3)}function ot(){if(g)if(l.length===0)e(0,s=w);else{const u=be(w);e(0,s=[...u])}Te("submit")}function rt(u){g=u,e(12,g)}function ut(u,h){u[h].speaker=this.value,e(13,_),e(0,s),e(1,l),e(39,Y),e(12,g)}function at(u,h){n.$$.not_equal(h.speaker,u)&&(h.speaker=u,e(13,_),e(0,s),e(1,l),e(39,Y),e(12,g))}const ft=(u,h)=>de(u,"speaker",h.speaker),ct=u=>d&&e(24,_e=u.speaker),_t=()=>d&&e(24,_e=null);function ht(u,h){u[h].text=this.value,e(13,_),e(0,s),e(1,l),e(39,Y),e(12,g)}const dt=(u,h)=>ae(h,u),gt=(u,h)=>ae(h,u),mt=(u,h)=>{h.key==="Escape"&&I?(e(16,I=!1),e(18,V=0),h.preventDefault()):I&&X===u&&(h.key==="ArrowDown"?(e(18,V=Math.min(V+1,W.length-1)),h.preventDefault()):h.key==="ArrowUp"?(e(18,V=Math.max(V-1,0)),h.preventDefault()):h.key==="Enter"&&(W[V]&&Oe(),h.preventDefault()))};function bt(u,h){me[u?"unshift":"push"](()=>{O[h]=u,e(14,O),e(13,_),e(0,s),e(1,l),e(39,Y),e(12,g)})}const pt=u=>r.indexOf(u),kt=u=>r.indexOf(u),wt=u=>ye(u),vt=u=>ve(u),Et=u=>he(u);function Tt(u){me[u?"unshift":"push"](()=>{q=u,e(15,q)})}function Ct(){w=this.value,e(23,w),e(0,s),e(13,_),e(1,l),e(39,Y),e(12,g)}const Dt=u=>{if(ae(u,0),l.length===0)e(0,s=w);else{const h=be(w);e(0,s=[...h])}},It=u=>ae(u,0),St=u=>{u.key==="Escape"&&I?(e(16,I=!1),e(18,V=0),u.preventDefault()):I&&(u.key==="ArrowDown"?(e(18,V=Math.min(V+1,W.length-1)),u.preventDefault()):u.key==="ArrowUp"?(e(18,V=Math.max(V-1,0)),u.preventDefault()):u.key==="Enter"&&(W[V]&&Oe(),u.preventDefault()))};function Ot(u){me[u?"unshift":"push"](()=>{G=u,e(20,G)})}const yt=u=>r.indexOf(u),Bt=u=>r.indexOf(u),At=u=>ye(u);return n.$$set=u=>{"speakers"in u&&e(1,l=u.speakers),"tags"in u&&e(2,r=u.tags),"value"in u&&e(0,s=u.value),"value_is_output"in u&&e(36,i=u.value_is_output),"placeholder"in u&&e(3,o=u.placeholder),"label"in u&&e(4,a=u.label),"info"in u&&e(5,c=u.info),"disabled"in u&&e(6,d=u.disabled),"show_label"in u&&e(7,C=u.show_label),"container"in u&&e(8,m=u.container),"max_lines"in u&&e(9,T=u.max_lines),"show_copy_button"in u&&e(10,H=u.show_copy_button),"show_submit_button"in u&&e(11,M=u.show_submit_button),"color_map"in u&&e(37,Q=u.color_map),"server"in u&&e(38,k=u.server)},n.$$.update=()=>{if(n.$$.dirty[0]&2|n.$$.dirty[1]&64&&(Q?e(25,se={...Q}):(e(25,se={}),l.forEach((u,h)=>{const E=y[h%y.length];e(25,se[u]=f[E],se)}))),n.$$.dirty[0]&8195&&s&&s.length===0&&_.length===0&&l.length!==0&&(e(13,_=[{speaker:l[0],text:""}]),e(0,s=[..._]),typeof s!="string")){const u=s.map(h=>`${h.speaker}: ${h.text}`).join(" ");e(23,w=u)}if(n.$$.dirty[0]&4099|n.$$.dirty[1]&256&&JSON.stringify(s)!==Y){if(s==null&&e(13,_=[]),e(39,Y=JSON.stringify(s)),s&&typeof s!="string"){e(13,_=[...s]);const u=s.map(h=>`${h.speaker}: ${h.text}`).join(" ");e(23,w=u)}else e(23,w=s),!g&&l.length>0&&s&&e(13,_=be(s));Me()}n.$$.dirty[0]&24576&&(_.length>O.length?e(14,O=[...O,...Array(_.length-O.length).fill(null)]):_.length<O.length&&e(14,O=O.slice(0,_.length)),pe().then(()=>{O.forEach(u=>{u&&u instanceof HTMLTextAreaElement&&(u.style.height="auto",u.style.height=u.scrollHeight+"px")})})),n.$$.dirty[0]&8192&&nt(_)},[s,l,r,o,a,c,d,C,m,T,H,M,g,_,O,q,I,X,V,W,G,ce,ue,w,_e,se,ve,he,de,ae,Oe,ye,tt,be,lt,ot,i,Q,k,Y,rt,ut,at,ft,ct,_t,ht,dt,gt,mt,bt,pt,kt,wt,vt,Et,Tt,Ct,Dt,It,St,Ot,yt,Bt,At]}class rn extends Ae{constructor(t){super(),Ne(this,t,on,sn,Ve,{speakers:1,tags:2,value:0,value_is_output:36,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,show_submit_button:11,color_map:37,server:38},null,[-1,-1,-1])}}const un=rn;function We(n){let t,e;const l=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[18]];let r={};for(let s=0;s<l.length;s+=1)r=Mt(r,l[s]);return t=new qt({props:r}),t.$on("clear_status",n[21]),{c(){$(t.$$.fragment)},l(s){ee(t.$$.fragment,s)},m(s,i){te(t,s,i),e=!0},p(s,i){const o=i[0]&262148?Rt(l,[i[0]&4&&{autoscroll:s[2].autoscroll},i[0]&4&&{i18n:s[2].i18n},i[0]&262144&&Pt(s[18])]):{};t.$set(o)},i(s){e||(p(t.$$.fragment,s),e=!0)},o(s){D(t.$$.fragment,s),e=!1},d(s){ne(t,s)}}}function an(n){let t,e,l,r,s,i=n[18]&&We(n);function o(d){n[22](d)}function a(d){n[23](d)}let c={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17],container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],show_submit_button:n[20],server:n[3],disabled:!n[19]};return n[0]!==void 0&&(c.value=n[0]),n[1]!==void 0&&(c.value_is_output=n[1]),e=new un({props:c}),me.push(()=>De(e,"value",o)),me.push(()=>De(e,"value_is_output",a)),e.$on("change",n[24]),e.$on("input",n[25]),e.$on("submit",n[26]),e.$on("blur",n[27]),e.$on("select",n[28]),e.$on("focus",n[29]),e.$on("copy",n[30]),{c(){i&&i.c(),t=le(),$(e.$$.fragment)},l(d){i&&i.l(d),t=ie(d),ee(e.$$.fragment,d)},m(d,C){i&&i.m(d,C),F(d,t,C),te(e,d,C),s=!0},p(d,C){d[18]?i?(i.p(d,C),C[0]&262144&&p(i,1)):(i=We(d),i.c(),p(i,1),i.m(t.parentNode,t)):i&&(oe(),D(i,1,1,()=>{i=null}),re());const m={};C[0]&16&&(m.label=d[4]),C[0]&128&&(m.info=d[7]),C[0]&4096&&(m.show_label=d[12]),C[0]&8192&&(m.max_lines=d[13]),C[0]&131072&&(m.show_copy_button=d[17]),C[0]&16384&&(m.container=d[14]),C[0]&32&&(m.speakers=d[5]),C[0]&64&&(m.tags=d[6]),C[0]&256&&(m.placeholder=d[8]),C[0]&1048576&&(m.show_submit_button=d[20]),C[0]&8&&(m.server=d[3]),C[0]&524288&&(m.disabled=!d[19]),!l&&C[0]&1&&(l=!0,m.value=d[0],Ie(()=>l=!1)),!r&&C[0]&2&&(r=!0,m.value_is_output=d[1],Ie(()=>r=!1)),e.$set(m)},i(d){s||(p(i),p(e.$$.fragment,d),s=!0)},o(d){D(i),D(e.$$.fragment,d),s=!1},d(d){d&&v(t),i&&i.d(d),ne(e,d)}}}function fn(n){let t,e;return t=new Xt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[an]},$$scope:{ctx:n}}}),{c(){$(t.$$.fragment)},l(l){ee(t.$$.fragment,l)},m(l,r){te(t,l,r),e=!0},p(l,r){const s={};r[0]&2048&&(s.visible=l[11]),r[0]&512&&(s.elem_id=l[9]),r[0]&1024&&(s.elem_classes=l[10]),r[0]&32768&&(s.scale=l[15]),r[0]&65536&&(s.min_width=l[16]),r[0]&16384&&(s.padding=l[14]),r[0]&1995263|r[1]&1&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){e||(p(t.$$.fragment,l),e=!0)},o(l){D(t.$$.fragment,l),e=!1},d(l){ne(t,l)}}}function cn(n,t,e){let{gradio:l}=t,{server:r}=t,{label:s="Dialogue"}=t,{speakers:i=[]}=t,{tags:o=[]}=t,{info:a=void 0}=t,{placeholder:c=void 0}=t,{elem_id:d=""}=t,{elem_classes:C=[]}=t,{visible:m=!0}=t,{value:T=[]}=t,{show_label:H}=t,{max_lines:M=void 0}=t,{container:Q=!0}=t,{scale:g=null}=t,{min_width:k=void 0}=t,{show_copy_button:_=!1}=t,{loading_status:q=void 0}=t,{value_is_output:I=!1}=t,{interactive:X}=t,{show_submit_button:V=!0}=t;const W=()=>l.dispatch("clear_status",q);function O(f){T=f,e(0,T)}function G(f){I=f,e(1,I)}const Y=()=>l.dispatch("change",T),ce=()=>l.dispatch("input"),ue=()=>l.dispatch("submit"),S=()=>l.dispatch("blur"),w=f=>l.dispatch("select",f.detail),_e=()=>l.dispatch("focus"),y=f=>l.dispatch("copy",f.detail);return n.$$set=f=>{"gradio"in f&&e(2,l=f.gradio),"server"in f&&e(3,r=f.server),"label"in f&&e(4,s=f.label),"speakers"in f&&e(5,i=f.speakers),"tags"in f&&e(6,o=f.tags),"info"in f&&e(7,a=f.info),"placeholder"in f&&e(8,c=f.placeholder),"elem_id"in f&&e(9,d=f.elem_id),"elem_classes"in f&&e(10,C=f.elem_classes),"visible"in f&&e(11,m=f.visible),"value"in f&&e(0,T=f.value),"show_label"in f&&e(12,H=f.show_label),"max_lines"in f&&e(13,M=f.max_lines),"container"in f&&e(14,Q=f.container),"scale"in f&&e(15,g=f.scale),"min_width"in f&&e(16,k=f.min_width),"show_copy_button"in f&&e(17,_=f.show_copy_button),"loading_status"in f&&e(18,q=f.loading_status),"value_is_output"in f&&e(1,I=f.value_is_output),"interactive"in f&&e(19,X=f.interactive),"show_submit_button"in f&&e(20,V=f.show_submit_button)},[T,I,l,r,s,i,o,a,c,d,C,m,H,M,Q,g,k,_,q,X,V,W,O,G,Y,ce,ue,S,w,_e,y]}class kn extends Ae{constructor(t){super(),Ne(this,t,cn,fn,Ve,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,show_copy_button:17,loading_status:18,value_is_output:1,interactive:19,show_submit_button:20},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(t){this.$$set({gradio:t}),j()}get server(){return this.$$.ctx[3]}set server(t){this.$$set({server:t}),j()}get label(){return this.$$.ctx[4]}set label(t){this.$$set({label:t}),j()}get speakers(){return this.$$.ctx[5]}set speakers(t){this.$$set({speakers:t}),j()}get tags(){return this.$$.ctx[6]}set tags(t){this.$$set({tags:t}),j()}get info(){return this.$$.ctx[7]}set info(t){this.$$set({info:t}),j()}get placeholder(){return this.$$.ctx[8]}set placeholder(t){this.$$set({placeholder:t}),j()}get elem_id(){return this.$$.ctx[9]}set elem_id(t){this.$$set({elem_id:t}),j()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(t){this.$$set({elem_classes:t}),j()}get visible(){return this.$$.ctx[11]}set visible(t){this.$$set({visible:t}),j()}get value(){return this.$$.ctx[0]}set value(t){this.$$set({value:t}),j()}get show_label(){return this.$$.ctx[12]}set show_label(t){this.$$set({show_label:t}),j()}get max_lines(){return this.$$.ctx[13]}set max_lines(t){this.$$set({max_lines:t}),j()}get container(){return this.$$.ctx[14]}set container(t){this.$$set({container:t}),j()}get scale(){return this.$$.ctx[15]}set scale(t){this.$$set({scale:t}),j()}get min_width(){return this.$$.ctx[16]}set min_width(t){this.$$set({min_width:t}),j()}get show_copy_button(){return this.$$.ctx[17]}set show_copy_button(t){this.$$set({show_copy_button:t}),j()}get loading_status(){return this.$$.ctx[18]}set loading_status(t){this.$$set({loading_status:t}),j()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(t){this.$$set({value_is_output:t}),j()}get interactive(){return this.$$.ctx[19]}set interactive(t){this.$$set({interactive:t}),j()}get show_submit_button(){return this.$$.ctx[20]}set show_submit_button(t){this.$$set({show_submit_button:t}),j()}}export{un as BaseDialogue,En as BaseExample,kn as default};
//# sourceMappingURL=Index.COIafcIj.js.map
